/*! angular-pinch-zoom - v0.2.1 */
angular.module("ngPinchZoom",[]).directive("ngPinchZoom",function(){function n(n,t,e){function i(n){var t=n.originalEvent?n.originalEvent.touches:n.touches;I=t[0].clientX,k=t[0].clientY,X=d,Y=w,M=0,S=0}function r(n){var e=n.originalEvent?n.originalEvent.touches:n.touches;""===u&&(1===e.length&&f>1?u="swipe":2===e.length&&(u="pinch",p=f,v=c(e),E=e[0].clientX-parseInt((e[0].clientX-e[1].clientX)/2,10)-t[0].offsetLeft-X,b=e[0].clientY-parseInt((e[0].clientY-e[1].clientY)/2,10)-t[0].offsetTop-Y)),"swipe"===u?(n.preventDefault(),M=e[0].clientX-I,S=e[0].clientY-k,d=X+M,w=Y+S,a()):"pinch"===u&&(n.preventDefault(),h=c(e),g=h/v,f=g*p,d=E*(1-g)+X+M,w=b*(1-g)+Y+S,a())}function o(n){var t=n.originalEvent?n.originalEvent.touches:n.touches;return""===u&&0===M&&0===S?(d=0,w=0,f=1,a(.1),void(u="")):void(""===u||t.length>0||(f<1?(f=1,d=0,w=0):f>m?(f=m,g=f/p,d=E*(1-g)+X+M,w=b*(1-g)+Y+S):(d>0?d=0:d<l*(1-f)&&(d=l*(1-f)),w>0?w=0:w<s*(1-f)&&(w=s*(1-f))),a(.1),u=""))}function c(n){var t=Math.sqrt(Math.pow(n[0].clientX-n[1].clientX,2)+Math.pow(n[0].clientY-n[1].clientY,2));return parseInt(t,10)}function a(n){var e=n?"all cubic-bezier(0,0,.5,1) "+n+"s":"",i=[f,0,0,f,d,w],r="matrix("+i.join(",")+")";t.css({"-webkit-transition":e,transition:e,"-webkit-transform":r+" translate3d(0,0,0)",transform:r})}var l,s,u="",h=0,v=0,f=1,g=1,p=1,m=parseInt(e.maxScale,10);(isNaN(m)||m<=1)&&(m=3);var d=0,w=0,X=0,Y=0,E=0,b=0,I=0,k=0,M=0,S=0,x=new Image;x.onload=function(){l=t[0].clientWidth,s=t[0].clientHeight,t.css({"-webkit-transform-origin":"0 0","transform-origin":"0 0"}),t.on("touchstart",i),t.on("touchmove",r),t.on("touchend",o)},e.ngSrc?x.src=e.ngSrc:x.src=e.src}var t={restrict:"A",scope:!1,link:n};return t});